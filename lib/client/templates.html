<template name="projectsList">
    <div class="ui grid container">
        {{#if projects}}
            {{#each projects}}
                <div class="four wide column">
                    {{> project}}
                </div>
            {{/each}}
        {{/if}}
    </div>
    {{#if loggedIn}}
        {{> insertProjectForm doc=currentUserId docType="User" }}
    {{/if}}
</template>

<template name="project">
    <div class="ui top attached menu">
        <div class="ui dropdown icon item">
            <i class="wrench icon"></i>
            <div class="menu">
                <div class="item">
                    <i class="dropdown icon"></i>
                    <span class="text">New</span>
                    <div class="menu">
                        <div class="item">Document</div>
                        <div class="item">Image</div>
                    </div>
                </div>
                <div class="item">
                    Open...
                </div>
                <div class="item">
                    Save...
                </div>
                <div class="item">Edit Permissions</div>
                <div class="divider"></div>
                <div class="header">
                    Export
                </div>
                <div class="item">
                    Share...
                </div>
            </div>
        </div>
    </div>
    <h4><a href="{{pathFor route='project.show'}}">{{title}}</a></h4>
    <p>{{description}}<span><small> - {{createdAt}}</small></span></p>
</template>

<template name="projectPage">
    {{# if selectedProject}}
        {{> editProjectForm doc=this}}
    {{else}}
        <div class="ui top menu">
            <div class="ui dropdown icon item">
                <i class="wrench icon"></i>
                <div class="menu">
                    <div class="item">
                        <a href="#">Add Members</a>
                    </div>
                    <div class="item">
                        <a href="#" class="editProject">Edit Project</a>
                    </div>
                    <div class="divider"></div>
                    <div class="item">
                        <a href="#" class="deleteProject">Delete Project</a>
                    </div>
                </div>
            </div>
        </div>
        <h4>{{title}}</h4>
        <p>{{description}}<span><small> - {{createdAt}}</small></span></p>
        {{#if categoryExists}}
            {{> taskCategoriesList doc=_id docType="Projects"}}
        {{/if}}

        <small><button class="deleteProject">Delete</button></small>
        {{> membershipButton collection='Projects' _id=_id }}
    {{/ if}}
</template>

<template name="insertProjectForm">
    {{#autoForm collection="Projects" meteormethod="newProject" type="insert" id="insertProjectForm"}}
        {{> afQuickField name='title'}}
        {{> afQuickField name='description'}}
        {{> locationInputField}}

        {{> afQuickField name='doc' value=doc type='hidden'}}
        {{> afQuickField name='docType' value=docType type='hidden'}}
        <button id="submitProjectForm" type="submit" class="btn btn-primary">Insert</button>
    {{/autoForm}}
</template>

<template name="editProjectForm">
    {{#autoForm collection="Projects" doc=doc meteormethod="updateProject" type="update" id="editProjectForm"}}
        {{> afQuickField name='title'}}
        {{> afQuickField name='description'}}
        <button id="submitUpdate" type="submit">Update</button>
        <button id="cancelUpdate">Cancel</button>
    {{/autoForm}}
</template>
